<div class="mycontainer">

  <div class="loader-container">
    <app-loader [name]="dashboardComponentLoader"></app-loader>
    <div class="col-5 white-container shadow-container">
      <div class="info-container">
        <div class="input-container">
          <div class="label required">Date</div>
          <p-calendar [(ngModel)]="filterDate" [style]="{'width':'100%'}" appendTo="body" [locale]="calendarLocale"
            dateFormat="dd.mm.yy">
          </p-calendar>
        </div>


        <p-chart type="pie" [data]="chartData" [options]="chartOptions"></p-chart>

      </div>
      <div class="map-container">
        <agm-map [zoom]="zoom" [latitude]="centerLatitude" [longitude]="centerLongitude">
          <ng-container *ngFor="let company of companies">
            <agm-marker [latitude]="company.latitude" [longitude]="company.longitude">
            </agm-marker>
          </ng-container>
        </agm-map>
      </div>
    </div>




    <div class="col-7 white-container shadow-container">

      <p-table #dt [columns]="columns" [value]="companies" [scrollable]="true" [resizableColumns]="true"
        [reorderableColumns]="true" scrollHeight="calc(100% - 20px)" class="mytableBorder"
        [exportFilename]="'contractors'">
        <ng-template pTemplate="colgroup" let-columns>
          <colgroup>
            <col *ngFor="let col of columns" [style.width]="col.width">
          </colgroup>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of columns" [pSortableColumn]="col.field" class="headerRow" [ngSwitch]="col.field"
              pReorderableColumn>
              {{col.header}}
              <div *ngSwitchCase="'action'"></div>
              <p-sortIcon *ngSwitchDefault [field]="col.field"></p-sortIcon>
            </th>
          </tr>
          <tr>
            <th *ngFor="let col of columns" [ngSwitch]="col.field">
              <p-calendar *ngSwitchCase="'deliveryDate'" #rangeFilter1 selectionMode="range" appendTo="body"
                placeholder="Filter" dateFormat="dd.mm.yy" [showButtonBar]="true"
                (onSelect)="dt.filter(rangeFilter1.value, col.field, 'dateRangeFilter')" [locale]="calendarLocale"
                (onClearClick)="dt.filter(null, col.field, 'dateRangeFilter')" [style]="{'minWidth':'100%'}">
              </p-calendar>
              <p-calendar *ngSwitchCase="'dateCreated'" #rangeFilter1 selectionMode="range" appendTo="body"
                placeholder="Filter" dateFormat="dd.mm.yy" [showButtonBar]="true"
                (onSelect)="dt.filter(rangeFilter1.value, col.field, 'dateRangeFilter')" [locale]="calendarLocale"
                (onClearClick)="dt.filter(null, col.field, 'dateRangeFilter')" [style]="{'minWidth':'100%'}">
              </p-calendar>
              <input *ngSwitchDefault type="text" placeholder="Filter"
                (input)="dt.filter($any($event.target).value, col.field, col.filterMatchMode)">
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
          <tr [pSelectableRow]="rowData">
            <td *ngFor="let col of columns" [ngSwitch]="col.field">
              <div *ngSwitchCase="'dateCreated'">
                {{rowData[col.field] | date:"HH:mm dd.MM.yyyy"}}
              </div>
              <div *ngSwitchCase="'deliveryDate'">
                {{rowData[col.field] | date:"HH:mm dd.MM.yyyy"}}
              </div>
              <div *ngSwitchDefault>
                {{rowData[col.field]}}
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>

    </div>


  </div>
</div>
